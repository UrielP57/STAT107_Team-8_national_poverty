---
title: "Cleaning process of Project PHC"
author: "Donnie, Marianne, Uriel"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
ND <- read.csv("New_DDAY.csv")
API <- read.csv("API_A.csv")
Pop_Growth <- read.csv("Pop_Growth.csv")
unemployment <- read.csv("Unemployment.csv")
Education <- read.csv("Education.csv")
```

#Code for New_DDAY

{r}
#Item names: row_ND, not_imp, ind_row, RC, row_ND,vari_RC.
row_ND <- c() 
mid <- c()
not_imp <- c() #useless vector
for (ind_row in rownames(ND)){
  for (i in ND[ind_row,]){
    RC <- as.character(i)
    if (is.na(RC)){
      #might screw results so swap to NA????
      RC <- 0
      row_ND <- c(row_ND, RC)
      
     } else {
       vari_RC <- suppressWarnings(as.numeric(RC))
                                      
                                      
        if (!is.na(vari_RC)){
          row_ND <- c(row_ND, RC)
          }  else if (RC != ""){
          not_imp <- c(not_imp, RC)
          }
    }
  }
}
```

# find_ND: Get groups of 270 and each group has a length of 65. Then use split() to apply that row_ND
```{r}
a <- row_ND
ND_by_65 <- rep(1:270, each = 65)
fin_ND <- split(a, ND_by_65)

```


# Data Frame for ND with rows and columns switched: df_ND
```{r}
# must have this chunk running first if you want the other similar section to function!!
col_nm_all <- ND[,1][5:270]
df_ND <- data.frame(fin_ND[5:270])
colnames(df_ND) <- c(col_nm_all)
years <- c(1960:2024) 
rownames(df_ND) <- c(years)
df_ND$idea <- ifelse(df_ND$Aruba >= 0, 0)
for (idk in colnames(df_ND)){
  df_ND$idea <- as.numeric(df_ND$idea) + as.numeric(df_ND[[idk]])
  df_ND$Poverty_rate <- ifelse(df_ND$Aruba >= 0, df_ND$idea/ 270)
}
```


## Supporting data sets: API, Pop_Growth, Education and Unemployment



```{r}
#Item names: row_API, not_imp_2, ind_API, RC_2,vari_RC_2.
row_API <- c() 
not_imp_2 <- c() #useless vector
for (ind_API in rownames(API)){
  for (i in API[ind_API,]){
    RC_2 <- as.character(i)
    if (is.na(RC_2)){
      RC_2 <- 0
      row_API <- c(row_API, RC_2)
      
     } else {
       vari_RC_2 <- suppressWarnings(as.numeric(RC_2))
                                    
                                    
        if (!is.na(vari_RC_2)){
          row_API <- c(row_API, RC_2)
          } else if (RC_2 != ""){
          not_imp_2 <- c(not_imp_2, RC_2)
        }
    }
  }
}
```

# Look at main data set grouping section for explanation
```{r}
b <- row_API
API_by_65 <- rep(1:270, each = 65)
fin_API <- split(b, API_by_65)
```

## Data Frame for API with rows and columns switched: df_API
```{r}
col_nm_2 <- API[,1][5:270]
df_API <- data.frame(col_nm = fin_API[5:270])

colnames(df_API) <- c(col_nm_2)
rownames(df_API) <- c(years)
df_API$idea <- ifelse(df_API$Aruba >= -1, 0,0)
for (idk_2 in colnames(df_API)){
  df_API$idea <- as.numeric(df_API$idea) + as.numeric(df_API[[idk_2]])
  df_ND$`Inflation` <- ifelse(df_API$Aruba >= -1, df_API$idea/ 270, 0)
}
```



## Pop_Growth
```{r}
#Item names: row_PG, NI, ind_PG, RC_3,vari_RC_3.
row_PG <- c()
NI <- c() #useless vector
for (ind_PG in rownames(Pop_Growth)){
  for (i in Pop_Growth[ind_PG,]){
    RC_3 <- as.character(i)
    if (is.na(RC_3)){
      RC_3 <- 0
      row_PG <- c(row_PG, RC_3)
      
     } else {
       vari_RC_3 <- suppressWarnings(as.numeric(RC_3))
                                    
                                    
                                    
      if (!is.na(vari_RC_3)){
        row_PG <- c(row_PG, RC_3)
      } else if (RC_3 != ""){
        NI <- c(NI, RC_3)
        }
    }
  }
}
```

# Look at main data set grouping section for explanation
```{r}
c <- row_PG
PG_by_65 <- rep(1:270, each = 65)
fin_PG <- split(c, PG_by_65)
```

## Data Frame for Pop_Growth with rows and columns switched: df_PG
```{r}
col_nm_3 <- Pop_Growth[,1][5:270]
df_PG <- data.frame(col_nm = fin_PG[5:270])

colnames(df_PG) <- c(col_nm_3)
rownames(df_PG) <- c(years)
df_PG$idea <- ifelse(df_PG$Aruba >= -1, 0,0)
for (idk_3 in colnames(df_API)){
  df_PG$idea <- as.numeric(df_PG$idea) + as.numeric(df_PG[[idk_3]])
  df_ND$`Population` <- ifelse(df_PG$Aruba >= -10000,0, df_PG$idea/ 270)
}
```



# Process for Unemployment
```{R}
#this is from previous chuck, my laptop is being annoying by not working properly.
row_unemp <- c()
NI_1 <- c() #useless vector
for (un in rownames(unemployment)){
  for (j in unemployment[un,]){
    RC_4 <- as.character(j)
    if (is.na(RC_4)){
      RC_4 <- 0
      row_unemp <- c(row_unemp, RC_4)
      
     } else {
       vari_RC_4 <- suppressWarnings(as.numeric(RC_4))
                                    
                                    
                                    
      if (!is.na(vari_RC_4)){
        row_unemp <- c(row_unemp, RC_4)
      } else if (RC_4 != ""){
        NI_1 <- c(NI_1, RC_4)
        }
    }
  }
}
```

# Look at main data set grouping section for explanation
```{r}
d <- row_unemp
unemp_by_65 <- rep(1:270, each = 65)
fin_unempo <- split(d, unemp_by_65)
```

## Data Frame for Unemployment with rows and columns switched: df_unemp
```{r}
col_nm_4 <- unemployment[,1][5:270]
df_unemployment <- data.frame(fin_unempo[5:270])

colnames(df_unemployment) <- c(col_nm_4)
rownames(df_unemployment) <- c(years)
```

```{r}
df_unemployment$idea <- ifelse(df_unemployment$Aruba >= -1, 0,0)
for (idk_4 in colnames(df_unemployment)){
  df_unemployment$idea <- as.numeric(df_unemployment$idea) + as.numeric(df_unemployment[[idk_4]])
  df_ND$`Unemployment` <- ifelse(df_unemployment$Aruba >= -10000,df_unemployment$idea/ 270,0)
}
```


# Education
```{r}
row_ed <- c()
not_ed <- c()
for (learn in rownames(Education)){
  for (i in Education[learn,]){
    RC_ed <- as.character(i)
    if (is.na(RC_ed)){
      RC_ed <- 0
      row_ed <- c(row_ed, RC_ed)
      
     } else {
       vari_RC_ed <- suppressWarnings(as.numeric(RC_ed))
                                    
                                    
                                    
      if (!is.na(vari_RC_ed)){
        row_ed <- c(row_ed, RC_ed)
      } else if (RC_ed != ""){
        not_ed <- c(not_ed, RC_ed)
        }
    }
  }
}
```

# Look at main data set grouping section for explanation
```{r}
k <- row_ed
ed_by_65 <- rep(1:270, each = 65)
fin_ed <- split(k, ed_by_65)
```

## Data Frame for Education with rows and columns switched: df_ed
```{r}
col_nm_ed <- Education[,1][5:270]
df_ed <- data.frame(col_nm_ed = fin_ed[5:270])

colnames(df_ed) <- c(col_nm_ed)
rownames(df_ed) <- c(years)
df_ed$Education <- ifelse(df_ed$Aruba >= -1, 0,0)
for (idk_ed in colnames(df_ed)){
  df_ed$Education <- as.numeric(df_ed$Education) + as.numeric(df_ed[[idk_ed]])
  df_ND$`Education % from GDP` <- ifelse(df_ed$Aruba >= -10000,df_ed$Education/ 270)
}
```
